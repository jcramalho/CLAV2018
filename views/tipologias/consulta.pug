extends ../layout
block corpo
    #organizacao-form.panel.panel-default.panel-custom
        .panel-heading
            h1.page-header
                div {{ tipologia.designacao }}
                    if user
                        a(:href="'/tipologias/editar/'+id" style="float:right")  
                            span.glyphicon.glyphicon-edit
        .panel-body
            .form-group
                table.consulta
                    //- NOME
                    tr
                        td(style="width:10%")
                            .info-label Designação: 
                        td(style="width:80%")
                            | {{ tipologia.designacao }}  
                    
                    //- SIGLA
                    tr
                        td(style="width:10%")
                            .info-label Sigla: 
                        td(style="width:80%")
                            | {{ tipologia.sigla }} 
                    
                    //- DOMINIO
                    tr
                        td(style="width:10%")
                            .info-label Dono de:
                        td(style="width:80%")
                            ul(v-if="eDonoProcessos" style="padding-left:20px" :class="{'is-collapsed' : domainCollapsed }")
                                li(v-for="c in donoProcessos")
                                    a(:href="'/classes/'+c.id") {{ c.codigo }}
                                    |  - {{ c.titulo }}
                            a(@click="domainCollapsed=!domainCollapsed" v-if="donoProcessos.length>6").maozinha
                                span(v-if="domainCollapsed") Mostrar mais...
                                span(v-else) Mostrar menos...
                        
                    //- PARTICIPAÇÕES
                    tr
                        td(style="width:10%")
                            .info-label Tipo de Participação:    
                        td(style="width:80%")
                            ul(v-if="partsReady" style="padding-left:20px")
                                li(v-for="key in Object.keys(participations)" v-if="participations[key].length>0")
                                    b  {{ participationsDic[key] }}:
                                    ul(:class="{'is-collapsed' : partsCollapsed[key] }")
                                        li(v-for="p in participations[key]")
                                            a(:href="'/classes/'+p.id") {{ p.codigo }}
                                            |  - {{ p.titulo }}
                                    a(@click="partsCollapsed[key]=!partsCollapsed[key]" v-if="participations[key].length>6").maozinha
                                        span(v-if="partsCollapsed[key]") Mostrar mais...
                                        span(v-else) Mostrar menos...
                        
                    //- ELEMENTOS
                    tr
                        td(style="width:10%")
                            .info-label Entidades:
                        td(style="width:80%")
                            ul(style="padding-left:20px")
                                li(v-for="e in elementos")
                                    a(:href="'/entidades/'+e.id") {{ e.sigla }} 
                                    | - {{ e.designacao }}
            
            if user
                a(:href="'/tipologias/editar/'+id").btn.btn-xs.btn-default.col-sm-1
                    | Editar
                        
    //-

append scripts    
    script(src="/javascripts/tipologias/consulta.vue")