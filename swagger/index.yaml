openapi: 3.0.0
info: 
  description: |
    Esta é a API do projeto CLAV. Pode encontrar mais informação sobre o CLAV em [http://clav.dglab.gov.pt](http://clav.dglab.gov.pt).

    Por forma a usar esta API necessita em grande parte dos pedidos de usar um método de autenticação (Chaves API ou Token de um utilizador).

    As chaves API podem ser criadas na rota /chaves/registar e serem posteriormente usadas em grande parte dos pedidos GET usando a chave API num dos métodos de autenticação (apiKeyQuery ou apikeyAuth).

    Já um token de utilizador tem de ser obtida através do login de um utilizador (/users/login devolve um token) tendo acesso a todas as rotas que as chaves API conseguem aceder mais algumas rotas GET, POST, PUT e DELETE que dependem do nível do utilizador. Por forma a usar este tipo de autenticação use userQuery ou userAuth.

    Se tiver um token de um utilizador não necessita de indicar uma chave API para aceder aos GET's que a chave API dá acesso.
  version: 1.0.0
  title: CLAV API
  contact:
    name: CLAV
    email: clav@dglab.gov.pt
servers:
  - url: http://localhost:7779/api
    description: Main API server
  - url: http://clav-test.di.uminho.pt/api
    description: Server for testing
tags:
  - name: auth
    description:
  - name: chaves
    description:
  - name: classes
    description:
  - name: entidades
    description:
  - name: invariantes
    description:
  - name: legislacao
    description:
  - name: pedidos
    description:
  - name: pendentes
    description:
  - name: stats
    description:
  - name: tabelasSelecao
    description:
  - name: termosIndice
    description:
  - name: tipologias
    description:
  - name: travessia
    description:
  - name: utils
    description:
  - name: vocabularios
    description:
  - name: users
    description:
  - name: ontologia
    description:
  - name: autosEliminacao
    description:
paths: !!inc/dir [ 'paths' ] 
components: 
  schemas: !!inc/dir [ 'schemas', excludeTopLevelDirSeparator: true ]
  securitySchemes:
    apiKeyQuery:
      type: apiKey
      in: query
      name: apikey
      description: 'Introduza a sua chave API'
    apiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: 'Introduza a sua chave API com o formato: **apikey &lt;chaveAPI>**'
    userQuery:
      type: apiKey
      in: query
      name: token
      description: 'Introduza o seu token'
    userAuth:
      type: apiKey
      in: header
      name: Authorization
      description: 'Introduza o seu token com o formato: **token &lt;token>**'
  responses:
    UnauthorizedKey:
      description: Precisa de estar autenticado ou de usar uma chave API. O seu token ou a chave API expirou?
    UnauthorizedUser:
      description: Precisa de estar autenticado. O seu token expirou?
    PermissionsKey:
      description: Não tem permissões suficientes para realizar o pedido ou a sua chave API foi desativada.
    PermissionsUser:
      description: Não tem permissões suficientes para realizar o pedido.
  parameters:
    OutputFormatWithCSV:
      in: query
      name: OF
      required: false
      schema:
        type: string
        enum: [application/json, json, application/xml, xml, text/csv, csv]
      description: "Formato de saída do resultado"
