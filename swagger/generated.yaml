swagger: '2.0'
info:
  description: >-
    Esta é a API do projeto CLAV. Pode encontrar mais informação sobre o CLAV em
    [http://clav.dglab.gov.pt](http://clav.dglab.gov.pt).
  version: 1.0.0
  title: CLAV API
  contact:
    name: CLAV
    email: clav@dglab.gov.pt
host: 'localhost:7779'
basePath: /api
schemes:
  - http
tags:
  - name: auth
    description: null
  - name: chaves
    description: null
  - name: classes
    description: null
  - name: entidades
    description: null
  - name: invariantes
    description: null
  - name: legislacao
    description: null
  - name: pedidos
    description: null
  - name: pendentes
    description: null
  - name: stats
    description: null
  - name: tabelasSelecao
    description: null
  - name: termosIndice
    description: null
  - name: tipologias
    description: null
  - name: trabalhos
    description: null
  - name: travessia
    description: null
  - name: utils
    description: null
  - name: vocabularios
    description: null
  - name: users
    description: null
paths:
  /stats:
    get:
      summary: Lista as estatisticas para cada rota
      description: >-
        Lista as estatisticas para cada rota. Para cada rota devolve _id,
        nCallsPut, nCallsPost e nCallsGet.
      tags:
        - stats
      responses:
        '200':
          description: Lista as estatisticas para cada rota
        '500':
          description: Erro
  /users:
    get:
      summary: null
      description: null
      tags:
        - users
      parameters: null
      responses: null
  /classes:
    get:
      summary: Devolve as classes em vários formatos podendo ser filtradas por nível
      tags:
        - classes
      description: Devolve as classes em vários formatos podendo ser filtradas por nível
      parameters:
        - in: query
          name: formato
          type: string
          enum:
            - arvore
            - lista
          description: >-
            Formato de saída. Pode ser em árvore ou em lista. Quanto nenhum
            parâmetro é definido (formato, tipo e nivel) o formato de saída em
            arvore é o predefinido.
          required: false
          default: arvore
        - in: query
          name: tipo
          type: string
          enum:
            - comum
            - especifico
          description: >-
            Que tipo de processos são devolvidos numa lista. Podem ser comuns ou
            especificos. Quanto este parâmetro é definido o parâmetro formato
            não deve ser definido visto ser subscrito pelo mesmo (parâmetro
            formato).
          required: false
        - in: query
          name: nivel
          type: string
          enum:
            - 1
            - 2
            - 3
            - 4
          description: >-
            O nível dos processos devolvidos numa lista. Podem ser de 1º, 2º, 3º
            e 4º nível. Quanto este parâmetro é definido os parâmetros formato e
            tipo não devem ser definidos visto ser subscrito pelos mesmos
            (parâmetros formato e tipo).
          required: false
        - in: query
          name: ents
          type: string
          description: >-
            Obtém os processos especificos destas entidades. Este parâmetro só
            deve ser usado quando o tipo é especifico.
          required: false
        - in: query
          name: tips
          type: string
          description: >-
            Obtém os processos especificos destas tipologias. Este parâmetro só
            deve ser usado quando o tipo é especifico.
          required: false
      produces:
        - application/json
      responses:
        '200':
          description: >-
            Devolve as classes em vários formatos podendo ser filtradas por
            nível
        '500':
          description: Erro
    post:
      summary: 'Realizar pedido de criação de uma classe TODO: corrigir'
      description: Realizar pedido de criação de uma classe
      tags:
        - classes
      parameters:
        - name: body
          in: body
          description: Classe + Token
          required: true
          schema:
            properties:
              TODO:
                type: TODO
              codigo:
                type: string
              token:
                type: string
      responses:
        '200':
          description: Realizado pedido de criação de classe
        '500':
          description: Erro
  /pedidos:
    get:
      summary: Lista todos os pedidos que satisfazem uma condição
      description: Lista todos os pedidos que satisfazem uma condição
      tags:
        - pedidos
      parameters:
        - in: query
          name: criadoPor
          type: string
          description: Permite filtrar os pedidos que contém criadoPor igual a este valor
          required: false
        - in: query
          name: codigo
          type: string
          description: Permite filtrar os pedidos que contém codigo igual a este valor
          required: false
        - in: query
          name: tipo
          type: string
          description: Permite filtrar os pedidos que contém tipo igual a este valor
          required: false
        - in: query
          name: acao
          type: string
          description: Permite filtrar os pedidos que contém acao igual a este valor
          required: false
      responses:
        '200':
          description: Lista todos os pedidos que satisfazem uma condição
        '500':
          description: Erro
    put:
      summary: 'Atualização de um pedido: mais uma etapa na distribuição TODO: corrigir'
      description: 'Atualização de um pedido: mais uma etapa na distribuição'
      tags:
        - pedidos
      parameters:
        - name: body
          in: body
          description: Dados
          required: true
          schema:
            properties:
              TODO:
                type: TODO
              pedido._id:
                type: string
      responses:
        '200':
          description: 'Atualização de um pedido: mais uma etapa na distribuição'
        '500':
          description: Erro
    post:
      summary: 'Criação de um pedido TODO: corrigir'
      description: Criação de um pedido
      tags:
        - pedidos
      parameters:
        - name: body
          in: body
          description: Dados
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Criação de um pedido
        '500':
          description: Erro
  '/auth/{id}':
    get:
      summary: Devolve o URL de um pedido SAML
      description: Devolve o URL de um pedido SAML
      tags:
        - auth
      parameters:
        - name: id
          in: path
          required: true
          description: Para obter o URL é necessário fornecer o identificador na DB
          schema:
            type: string
      responses:
        '200':
          description: URL
          content:
            application/json:
              schema:
                type: string
        '500':
          description: Erro
  /utils/id:
    get:
      summary: null
      description: null
      tags:
        - utils
      parameters: null
      responses: null
  /entidades:
    get:
      summary: Lista todas as entidades
      description: >-
        Lista todas as entidades. Para cada entidade será devolvida a informação
        do id, sigla, designacao, sioe, estado e internacional
      tags:
        - entidades
      parameters:
        - in: query
          name: processos
          type: string
          enum:
            - com
            - sem
          description: >-
            No caso de ser escolhido \"com\" é listado as entidades com PNs
            associados. Já no caso de ser escolhido \"sem\" é listado as
            entidades sem PNs associados. Este parâmetro sobrepõe os seguintes,
            ou seja, caso este parâmetro seja definido os restantes são
            ignorados.
          required: false
        - in: query
          name: sigla
          type: string
          description: >-
            Permite filtrar as entidades que contém a sigla igual a este valor.
            Só funciona caso o parâmetro processos não seja definido. (ex: AR)
          required: false
        - in: query
          name: designacao
          type: string
          description: >-
            Permite filtrar as entidades que contém a designacao igual a este
            valor. Só funciona caso o parâmetro processos não seja definido.
            (ex: Assembleia da República)
          required: false
        - in: query
          name: internacional
          type: string
          description: >-
            Permite filtrar as entidades que contém internacional igual a este
            valor. Só funciona caso o parâmetro processos não seja definido.
          enum:
            - Sim
            - Não
          required: false
        - in: query
          name: sioe
          type: string
          description: >-
            Permite filtrar as entidades que contém sioe igual a este valor. Só
            funciona caso o parâmetro processos não seja definido. (ex:
            875780390)
          required: false
        - in: query
          name: estado
          type: string
          description: >-
            Permite filtrar as entidades que contém o estado igual a este valor.
            Só funciona caso o parâmetro processos não seja definido.
          enum:
            - Ativa
            - Inativa
            - Harmonização
          required: false
      responses:
        '200':
          description: Lista todas as entidades
        '500':
          description: Erro
    post:
      summary: 'Realizar pedido de criação de uma entidade TODO: corrigir'
      description: Realizar pedido de criação de uma entidade
      tags:
        - entidades
      parameters:
        - name: body
          in: body
          description: Entidade + Token
          required: true
          schema:
            properties:
              TODO:
                type: TODO
              codigo:
                type: string
              token:
                type: string
      responses:
        '200':
          description: Realizado pedido de criação de entidade
        '409':
          description: Já existe uma entidade com o id
        '500':
          description: Erro
  /pendentes:
    get:
      summary: Listagem dos trabalhos pendentes
      description: Listagem dos trabalhos pendentes
      tags:
        - pendentes
      responses:
        '200':
          description: Listagem dos trabalhos pendentes
        '500':
          description: Erro
    put:
      summary: 'Atualizar um trabalho previamente guardado como pendente TODO: corrigir'
      description: Atualizar um trabalho previamente guardado como pendente
      tags:
        - pendentes
      parameters:
        - name: body
          in: body
          description: Dados
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Atualizar um trabalho previamente guardado como pendente
        '500':
          description: Erro
    post:
      summary: 'Guardar um trabalho pendente TODO: corrigir'
      description: Guardar um trabalho pendente
      tags:
        - pendentes
      parameters:
        - name: body
          in: body
          description: Dados
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Guardar um trabalho pendente
        '500':
          description: Erro
  /travessia:
    get:
      summary: null
      description: null
      tags:
        - travessia
      parameters: null
      responses: null
    post:
      summary: null
      description: null
      tags:
        - travessia
      requestBody: null
      responses: null
  '/users/{id}':
    get:
      summary: null
      description: null
      tags:
        - users
      parameters: null
      responses: null
  /legislacao:
    get:
      summary: Lista todos os documentos legislativos
      description: >-
        Lista todos os documentos legislativos. Para cada documento legislativo
        é devolvida a informação do id, data, numero, tipo, sumario e entidades
      tags:
        - legislacao
      parameters:
        - in: query
          name: estado
          type: string
          enum:
            - A
          description: >-
            No caso de ser definido lista os documentos legislativos no estado
            A. Este parâmetro sobrepõe os seguintes, ou seja, caso este
            parâmetro seja definido os restantes são ignorados.
        - in: query
          name: processos
          type: string
          enum:
            - com
            - sem
          description: >-
            No caso de ser escolhido \"com\" é listado os documentos
            legislativos com PNs associados. Já no caso de ser escolhido \"sem\"
            é listado os documentos legislativos sem PNs associados. Só funciona
            caso o parâmetro estado não seja definido.
      responses:
        '200':
          description: Lista todos os documentos legislativos
        '500':
          description: Erro
    post:
      summary: 'Realizar pedido de criação de uma legislação TODO: corrigir'
      description: Realizar pedido de criação de uma legislação
      tags:
        - legislacao
      parameters:
        - name: body
          in: body
          description: Legislacao + Token
          required: true
          schema:
            properties:
              TODO:
                type: TODO
              codigo:
                type: string
              token:
                type: string
      responses:
        '200':
          description: Realizado pedido de criação de legislação
        '409':
          description: Já existe uma legislação com o número
        '500':
          description: Erro
  /tipologias:
    get:
      summary: null
      description: null
      tags:
        - tipologias
      parameters: null
      responses: null
    post:
      summary: null
      description: null
      tags:
        - tipologias
      requestBody: null
      responses: null
  /trabalhos:
    post:
      summary: null
      description: null
      tags:
        - trabalhos
      requestBody: null
      responses: null
  '/classes/{id}':
    get:
      summary: Retorna toda a informação relativa a uma classe
      tags:
        - classes
      description: Retorna toda a informação relativa a uma classe
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Retorna toda a informação relativa a uma classe
        '500':
          description: Erro
  /invariantes:
    get:
      summary: Lista os invariantes ou devolve os erros de um invariante em especifico
      description: >
        Devolve a lista dos invariantes caso não seja fornecido os parâmetros
        idRel e idInv. 

        No caso de os parâmetros serem fornecidos devolve os erros resultantes
        desse invariante.

        No 1º caso é devolvida toda a informação presente sobre os invariantes. 

        Já no segundo caso é devolvido descRel (descrição do grupo de
        invariantes), descInv (descrição do invariante) e results (os erros
        obtidos).

        Por fim caso seja fornecido apenas um dos parâmetros obtêm-se a lista
        dos invariantes.
      tags:
        - invariantes
      parameters:
        - in: query
          name: idRel
          type: string
          description: identificador de um grupo de invariantes
          required: false
        - in: query
          name: idInv
          type: string
          description: >-
            identificador do invariante dentro do grupo anteriormente
            identificado
          required: false
      responses:
        '200':
          description: >-
            Lista os invariantes ou devolve os erros de um invariante em
            especifico
        '500':
          description: Erro
  /stats/total:
    get:
      summary: Devolve o número total de acessos às rotas
      description: Devolve o número total de acessos às rotas
      tags:
        - stats
      responses:
        '200':
          description: Devolve o número total de acessos às rotas
        '500':
          description: Erro
  /termosIndice:
    get:
      summary: null
      description: null
      tags:
        - termosIndice
      parameters: null
      responses: null
    post:
      summary: null
      description: null
      tags:
        - termosIndice
      requestBody: null
      responses: null
  /users/login:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /vocabularios:
    get:
      summary: null
      description: null
      tags:
        - vocabularios
      parameters: null
      responses: null
    post:
      summary: null
      description: null
      tags:
        - vocabularios
      requestBody: null
      responses: null
  '/entidades/{id}':
    get:
      summary: Consulta de uma entidade
      description: >-
        Consulta de uma entidade. Devolve a informação da sigla, designacao,
        estado, sioe e internacional da entidade
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
      responses:
        '200':
          description: Consulta de uma entidade
        '500':
          description: Erro
    put:
      summary: Gera um pedido de alteração da entidade
      description: Gera um pedido de alteração da entidade
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
        - name: body
          in: body
          description: Dados a alterar
          required: true
          schema:
            $ref: '#/definitions/Entidade'
      responses:
        '200':
          description: Gera um pedido de alteração da entidade
        '500':
          description: Erro
    delete:
      summary: 'Gera um pedido de remoção da entidade TODO: corrigir'
      description: Gera um pedido de remoção da entidade
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
        - name: body
          in: body
          description: Entidade
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Gera um pedido de remoção da entidade
        '500':
          description: Erro
  '/pendentes/{id}':
    get:
      summary: Consultar trabalho pendente
      description: Consultar trabalho pendente
      tags:
        - pendentes
      parameters:
        - name: id
          in: path
          description: Identificador de um trabalho pendente
          type: string
          required: true
      responses:
        '200':
          description: Consultar trabalho pendente
        '500':
          description: Erro
  '/travessia/{id}':
    get:
      summary: null
      description: null
      tags:
        - travessia
      parameters: null
      responses: null
  /chaves/ativar:
    post:
      summary: Ativar chave API
      description: Ativar chave API
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: Para ativar a chave API é necessário fornecer o id da chave na BD
          schema:
            properties:
              id:
                type: string
            required:
              - id
      responses:
        '200':
          description: Chave API ativada
        '500':
          description: Erro
  '/classes/{id}/df':
    get:
      summary: Devolve a informação base do DF
      description: 'Devolve a informação base do DF, ou seja, idDF, valor e idJustificacao'
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a informação base do DF
        '500':
          description: Erro
  '/classes/{id}/ti':
    get:
      summary: Devolve os termos de índice de uma classe
      description: >-
        Devolve os termos de índice de uma classe. Para cada elemento da lista
        devolvida é devolvida a informação do idTI e termo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve os termos de índice de uma classe
        '500':
          description: Erro
  '/legislacao/{id}':
    get:
      summary: Devolve a informação associada a um documento legislativo
      description: >-
        Devolve a informação associada a um documento legislativo, ou seja,
        tipo, data, numero, sumario, link e entidades
      tags:
        - legislacao
      parameters:
        - name: id
          in: path
          description: >-
            Identificador de um documento legislativo (exemplo:
            leg_vzJWeOItxoCYX7Oj9WjPd)
          type: string
          required: true
      responses:
        '200':
          description: Consulta de um documento legislativo
        '500':
          description: Erro
    put:
      summary: Gera um pedido de alteração de um documento legislativo
      description: Gera um pedido de alteração de um documento legislativo
      tags:
        - legislacao
      parameters:
        - name: id
          in: path
          description: >-
            Identificador de um documento legislativo (exemplo:
            leg_vzJWeOItxoCYX7Oj9WjPd)
          type: string
          required: true
        - name: body
          in: body
          description: Dados a alterar
          required: true
          schema:
            $ref: '#/definitions/Documento Legislativo'
      responses:
        '200':
          description: Gera um pedido de alteração de um documento legislativo
        '500':
          description: Erro
    delete:
      summary: 'Gera um pedido de remoção de um documento legislativo TODO: corrigir'
      description: Gera um pedido de remoção de um documento legislativo
      tags:
        - legislacao
      parameters:
        - name: id
          in: path
          description: >-
            Identificador de um documento legislativo (exemplo:
            leg_vzJWeOItxoCYX7Oj9WjPd)
          type: string
          required: true
        - name: body
          in: body
          description: Documento legislativo
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Gera um pedido de remoção de um documento legislativo
        '500':
          description: Erro
  /tabelasSelecao:
    get:
      summary: null
      description: null
      tags:
        - tabelasSelecao
      parameters: null
      responses: null
    post:
      summary: null
      description: null
      tags:
        - tabelasSelecao
      requestBody: null
      responses: null
  '/tipologias/{id}':
    get:
      summary: null
      description: null
      tags:
        - tipologias
      parameters: null
      responses: null
    put:
      summary: null
      description: null
      tags:
        - tipologias
      requestBody: null
      responses: null
    delete:
      summary: null
      description: null
      tags:
        - tipologias
      requestBody: null
      responses: null
  /auth/adicionar:
    post:
      summary: Adicionar localização de um novo pedido SAML
      description: Adicionar localização de um novo pedido SAML
      consumes:
        - application/json
      tags:
        - auth
      parameters:
        - name: body
          in: body
          required: true
          description: Para adicionar é necessário o id e o url (localização)
          schema:
            $ref: '#/definitions/AuthCall'
      responses:
        '200':
          description: Adicionar localização de um novo pedido SAML
          content:
            application/json:
              schema:
                $ref: '#/definitions/AuthCall'
        '500':
          description: Erro
  /chaves/listagem:
    get:
      summary: Devolve todas as chaves API
      description: Devolve todas as chaves API
      tags:
        - chaves
      produces:
        - application/json
      responses:
        '200':
          description: Devolve todas as chaves API
        '500':
          description: Erro
  /chaves/renovar:
    post:
      summary: Envia email ao utilizador para renovar a chave API
      description: >-
        Envia email ao utilizador para renovar a chave API (serve apenas para a
        interface desenvolvida para o CLAV)
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: >-
            Para enviar email ao utilizador para renovar a chave API é
            necessário fornecer o email associado à chave API e o url de onde é
            proveniente o pedido de renovação (serve apenas para a interface
            desenvolvida para o CLAV)
          schema:
            properties:
              email:
                type: string
              url:
                type: string
            required:
              - email
              - url
      responses:
        '200':
          description: Email enviado ao utilizador
        '500':
          description: Erro
  '/classes/{id}/pca':
    get:
      summary: Devolve a informação base do PCA
      description: >-
        Devolve a informação base do PCA, ou seja, idPCA, formaContagem,
        subFormaContagem, idJustificacao, valores e notas
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a informação base do PCA
        '500':
          description: Erro
  '/pedidos/{codigo}':
    get:
      summary: Consulta de um pedido
      description: Consulta de um pedido
      tags:
        - pedidos
      parameters:
        - name: codigo
          in: path
          description: 'Identificador de um pedido (exemplo: 2019-321)'
          type: string
          required: true
      responses:
        '200':
          description: Consulta de um pedido
        '404':
          description: Pedido não existe
        '500':
          description: Erro
  /users/callback:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /users/eliminar:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /users/registar:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /chaves/eliminar:
    post:
      summary: Eliminar chave API
      description: Eliminar chave API
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: Para eliminar a chave API é necessário fornecer o id da chave na BD
          schema:
            properties:
              id:
                type: string
            required:
              - id
      responses:
        '200':
          description: Chave API eliminada
        '500':
          description: Erro
  /chaves/registar:
    post:
      summary: Criar chave API
      description: Criar Chave API
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: >-
            Para criar uma chave é necessário o nome para a chave, o email e a
            entidade
          schema:
            $ref: '#/definitions/RegChave'
      responses:
        '200':
          description: Chave API criada
        '500':
          description: Erro
  '/classes/{id}/dono':
    get:
      summary: Devolve a(s) entidade(s) dona(s) do processo
      description: >-
        Devolve a(s) entidade(s) dona(s) do processo. De cada entidade é
        devolvida a informação do id, tipo, sigla e designacao
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a(s) entidade(s) dona(s) do processo
        '500':
          description: Erro
  '/classes/{id}/meta':
    get:
      summary: Devolve a metainformação de uma classe
      description: >-
        Devolve a metainformação de uma classe, ou seja, codigo, titulo, status,
        desc, codigoPai, tituloPai, procTrans e procTipo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a metainformação de uma classe
        '500':
          description: Erro
  /users/desativar:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /users/recuperar:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  '/vocabularios/{id}':
    get:
      summary: null
      description: null
      tags:
        - vocabularios
      parameters: null
      responses: null
    put:
      summary: null
      description: null
      tags:
        - vocabularios
      requestBody: null
      responses: null
  /chaves/desativar:
    post:
      summary: Desativar chave API
      description: Desativar chave API
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: Para desativar a chave API é necessário fornecer o id da chave na BD
          schema:
            properties:
              id:
                type: string
            required:
              - id
      responses:
        '200':
          description: Chave API desativada
        '500':
          description: Erro
  /users/alterarNome:
    put:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /users/registarCC:
    post:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  '/tabelasSelecao/{id}':
    get:
      summary: null
      description: null
      tags:
        - tabelasSelecao
      parameters: null
      responses: null
  /users/alterarEmail:
    put:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  /users/alterarNivel:
    put:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  '/classes/{id}/notasAp':
    get:
      summary: Devolve a lista de notas de aplicação de uma classe
      description: >-
        Devolve a lista de notas de aplicação de uma classe. Para cada elemento
        da lista é devolvida a informação do idNota e nota
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a lista de notas de aplicação de uma classe
        '500':
          description: Erro
  '/classes/{id}/notasEx':
    get:
      summary: Devolve a lista de notas de exclusão de uma classe
      description: >-
        Devolve a lista de notas de exclusão de uma classe. Para cada elemento
        da lista é devolvida a informação do idNota e nota
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c100.10.001)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a lista de notas de exclusão de uma classe
        '500':
          description: Erro
  '/classes/{id}/procRel':
    get:
      summary: Devolve o(s) processo(s) relacionado(s)
      description: >-
        Devolve o(s) processo(s) relacionado(s). Para cada processo relacionado
        é devolvida a informação do id, codigo, titulo, idRel e tipoRel
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve o(s) processo(s) relacionado(s)
        '500':
          description: Erro
  /classes/verificarNA:
    post:
      summary: Verifica se uma determinada notaAplicação já existe
      description: Verifica se uma determinada notaAplicação já existe
      tags:
        - classes
      parameters:
        - name: body
          in: body
          description: Nota Aplicação a verificar
          required: true
          schema:
            properties:
              na:
                type: string
            example:
              na: Violação de normas internacionais ratificadas por Portugal
      responses:
        '200':
          description: Verifica se uma determinada notaAplicação já existe
        '500':
          description: Erro
  /termosIndice/quantos:
    get:
      summary: null
      description: null
      tags:
        - termosIndice
      parameters: null
      responses: null
  /trabalhos/utilizador:
    get:
      summary: null
      description: null
      tags:
        - trabalhos
      parameters: null
      responses: null
  '/legislacao/{id}/regula':
    get:
      summary: Devolve a lista de processos regulados pelo documento
      description: >-
        Devolve a lista de processos regulados pelo documento. Para cada
        processo devolve a informação do id, codigo e titulo
      tags:
        - legislacao
      parameters:
        - name: id
          in: path
          description: >-
            Identificador de um documento legislativo (exemplo:
            leg_6U8eokSH6rjR0mh34m6-y)
          type: string
          required: true
      responses:
        '200':
          description: Devolve a lista de processos regulados pelo documento
        '500':
          description: Erro
  /users/alterarPassword:
    put:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  '/users/listarEmail/{id}':
    get:
      summary: null
      description: null
      tags:
        - users
      parameters: null
      responses: null
  '/users/listarToken/{id}':
    get:
      summary: null
      description: null
      tags:
        - users
      parameters: null
      responses: null
  /chaves/atualizarChave:
    post:
      summary: Renovar chave API
      description: Renovar chave API. Apenas altera o valor da chave e a data de criação
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: Para renovar a chave API é necessário fornecer o id da chave na BD
          schema:
            properties:
              id:
                type: string
            required:
              - id
      responses:
        '200':
          description: Chave API renovada
        '500':
          description: Erro
  '/chaves/listarToken/{id}':
    get:
      summary: Devolve a informação de uma chave API
      description: Devolve a informação de uma chave API
      tags:
        - chaves
      parameters:
        - name: id
          in: path
          description: valor da chave
          type: string
          required: true
      responses:
        '200':
          description: Devolve a informação de uma chave API
        '500':
          description: Erro
  '/classes/{id}/legislacao':
    get:
      summary: Devolve a legislação associada ao contexto de avaliação
      description: >-
        Devolve a legislação associada ao contexto de avaliação. Para cada lei
        devolve a informação do id, idLeg, tipo, numero e sumario
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a legislação associada ao contexto de avaliação
        '500':
          description: Erro
  /users/alterarMultiplos:
    put:
      summary: null
      description: null
      tags:
        - users
      requestBody: null
      responses: null
  '/users/verificaToken/{id}':
    get:
      summary: null
      description: null
      tags:
        - users
      parameters: null
      responses: null
  '/classes/justificacao/{id}':
    get:
      summary: 'Devolve uma justificação, PCA ou DF'
      description: >-
        Devolve uma justificação, PCA ou DF, que é composta por uma lista de
        critérios: tipoId, criterio, tipoLabel e conteudo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma justificação (exemplo: just_pca_c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: 'Devolve uma justificação, PCA ou DF'
        '500':
          description: Erro
  /classes/verificarTitulo:
    post:
      summary: Verifica se um determinado título de classe já existe
      description: Verifica se um determinado título de classe já existe
      tags:
        - classes
      parameters:
        - name: body
          in: body
          description: título da classe a verificar
          required: true
          schema:
            properties:
              titulo:
                type: string
            example:
              titulo: Definição de políticas conjuntas e de instrumentos de regulação
      responses:
        '200':
          description: Verifica se um determinado título de classe já existe
        '500':
          description: Erro
  '/classes/{id}/descendencia':
    get:
      summary: Devolve a lista de filhos de uma classe
      description: >-
        Devolve a lista de filhos de uma classe. Para cada elemento da lista de
        filhos é devolvida a informação do id, codigo e titulo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a lista de filhos de uma classe
        '500':
          description: Erro
  '/classes/{id}/participante':
    get:
      summary: Devolve a(s) entidade(s) participante(s) do processo
      description: >-
        Devolve a(s) entidade(s) participante(s) do processo. Para cada entidade
        é devolvida a informação do id, sigla, designacao e participLabel
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a(s) entidade(s) participante(s) do processo
        '500':
          description: Erro
  '/entidades/{id}/tipologias':
    get:
      summary: Lista as tipologias a que uma entidade pertence
      description: >-
        Lista as tipologias a que uma entidade pertence. Para cada tipologia
        devolva a informação do id, sigla e designacao
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
      responses:
        '200':
          description: Lista as tipologias a que uma entidade pertence
        '500':
          description: Erro
  '/tipologias/{id}/elementos':
    get:
      summary: null
      description: null
      tags:
        - tipologias
      parameters: null
      responses: null
  /chaves/atualizarMultiplos:
    put:
      summary: Atualizar chave API
      description: >-
        Atualizar chave API. Pode-se alterar nome, email (contactInfo) e
        entidade.
      tags:
        - chaves
      parameters:
        - in: body
          name: body
          description: >-
            Para renovar a chave API é necessário fornecer o id da chave na BD,
            o nome a usar, o email a usar (contactInfo) e a entidade a usar.
          schema:
            properties:
              id:
                type: string
              name:
                type: string
              contactInfo:
                type: string
              entity:
                type: string
            required:
              - id
              - name
              - contactInfo
              - entity
      responses:
        '200':
          description: Chave API atualizada
        '500':
          description: Erro
  '/classes/verificar/{codigo}':
    get:
      summary: Verifica se um determinado código de classe já existe
      description: Verifica se um determinado código de classe já existe
      tags:
        - classes
      parameters:
        - name: codigo
          in: path
          description: 'Código a verificar (exemplo: 200.10.100)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Verifica se um determinado código de classe já existe
        '500':
          description: Erro
  '/classes/{id}/procRel/{idRel}':
    get:
      summary: Devolve o(s) processo(s) relacionado(s) por uma relação específica
      description: >-
        Devolve o(s) processo(s) relacionado(s) por uma relação específica. Para
        cada processo é devolvida a informação do id, codigo e titulo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c200.10.100)'
          type: string
          required: true
        - name: idRel
          in: path
          description: 'Identificador da relação (exemplo: eSucessorDe)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve o(s) processo(s) relacionado(s) por uma relação específica
        '500':
          description: Erro
  /classes/verificarExemploNA:
    post:
      summary: Verifica se um determinado exemplo de nota de aplicação já existe
      description: Verifica se um determinado exemplo de nota de aplicação já existe
      tags:
        - classes
      parameters:
        - name: body
          in: body
          description: exemplo de nota de aplicação a verificar
          required: true
          schema:
            properties:
              exemplo:
                type: string
            example:
              exemplo: Código da Estrada
      responses:
        '200':
          description: Verifica se um determinado exemplo de nota de aplicação já existe
        '500':
          description: Erro
  '/classes/{id}/exemplosNotasAp':
    get:
      summary: Devolve a lista de exemplos das notas de aplicação de uma classe
      description: >-
        Devolve a lista de exemplos das notas de aplicação de uma classe. Para
        cada elemento da lista é devolvido a informação do idExemplo e exemplo
      tags:
        - classes
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma classe (exemplo: c100.10.001)'
          type: string
          required: true
      produces:
        - application/json
      responses:
        '200':
          description: Devolve a lista de exemplos das notas de aplicação de uma classe
        '500':
          description: Erro
  '/termosIndice/classe/{classe}':
    get:
      summary: null
      description: null
      tags:
        - termosIndice
      parameters: null
      responses: null
  '/pedidos/{codigo}/distribuicao':
    post:
      summary: 'Adição de distribuição TODO: corrigir'
      description: Adição de distribuição
      tags:
        - pedidos
      parameters:
        - name: codigo
          in: path
          description: 'Identificador de um pedido (exemplo: 2019-321)'
          type: string
          required: true
        - name: body
          in: body
          description: Dados
          required: true
          schema:
            properties:
              TODO:
                type: TODO
      responses:
        '200':
          description: Adição de distribuição
        '500':
          description: Erro
  '/entidades/{id}/intervencao/dono':
    get:
      summary: Lista os processos em que uma entidade intervem como dono
      description: >-
        Lista os processos em que uma entidade intervem como dono. Para cada
        processo devolve a informação do codigo e titulo
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
      responses:
        '200':
          description: Lista os processos em que uma entidade intervem como dono
        '500':
          description: Erro
  '/tipologias/{id}/intervencao/dono':
    get:
      summary: null
      description: null
      tags:
        - tipologias
      parameters: null
      responses: null
  '/entidades/{id}/intervencao/participante':
    get:
      summary: Lista os processos em que uma entidade intervem como participante
      description: >-
        Lista os processos em que uma entidade intervem como participante. Para
        cada processo devolve a informação do codigo, titulo e tipoPar
      tags:
        - entidades
      parameters:
        - name: id
          in: path
          description: 'Identificador de uma entidade (exemplo: ent_AAN)'
          type: string
          required: true
      responses:
        '200':
          description: Lista os processos em que uma entidade intervem como participante
        '500':
          description: Erro
  '/tipologias/{id}/intervencao/participante':
    get:
      summary: null
      description: null
      tags:
        - tipologias
      parameters: null
      responses: null
  '/tabelasSelecao/{id}/classes/{parent}/descendencia':
    get:
      summary: null
      description: null
      tags:
        - tabelasSelecao
      parameters: null
      responses: null
definitions:
  AuthCall:
    type: object
    properties:
      id:
        type: string
      url:
        type: string
    required:
      - id
      - url
  Entidade:
    type: object
    properties:
      designacao:
        type: string
      internacional:
        type: string
        enum:
          - Sim
          - Não
      sioe:
        type: string
      estado:
        type: string
        enum:
          - Ativa
          - Inativa
          - Harmonização
      tipologias:
        type: array
        items:
          type: string
    required:
      - designacao
      - internacional
      - sioe
      - estado
      - tipologias
  RegChave:
    type: object
    properties:
      name:
        type: string
      email:
        type: string
      entidade:
        type: string
    required:
      - name
      - email
      - entidade
  Documento Legislativo:
    type: object
    properties:
      numero:
        type: string
      data:
        type: string
      tipo:
        type: string
      titulo:
        type: string
      estado:
        type: string
        enum:
          - Ativa
          - Inativa
          - Harmonização
      entidades:
        type: array
        items:
          type: string
    required:
      - numero
      - data
      - tipo
      - titulo
      - estado
      - entidades
